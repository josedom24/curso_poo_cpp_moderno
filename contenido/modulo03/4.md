Perfecto, aquí tienes el material para el apartado:

---

# Herencia y polimorfismo en C++

## Repaso breve de la herencia

La **herencia** permite crear una nueva clase derivada a partir de una clase base, heredando atributos y métodos. Sin embargo, la verdadera potencia de la herencia en C++ aparece cuando combinamos herencia con **polimorfismo**.

---

## ¿Qué es el polimorfismo?

El término *polimorfismo* significa “muchas formas”. En POO, permite que un puntero o referencia a una clase base pueda referirse a objetos de clases derivadas diferentes y ejecutar el método apropiado para cada tipo.

Esto facilita la programación genérica y la extensión del código sin modificar la base.

---

## Tipos de polimorfismo en C++

1. **Polimorfismo estático (en tiempo de compilación):**

   * Sobrecarga de funciones.
   * Plantillas (templates).
2. **Polimorfismo dinámico (en tiempo de ejecución):**

   * Uso de funciones virtuales en clases base.
   * Permite que una llamada a función se resuelva en tiempo de ejecución según el tipo real del objeto.

---

## Polimorfismo dinámico con funciones virtuales

### Clases base con métodos virtuales

```cpp
class Animal {
public:
    virtual void hacerSonido() const {
        std::cout << "El animal hace un sonido.\n";
    }
    virtual ~Animal() = default;  // Destructor virtual recomendable
};
```

* La palabra clave `virtual` indica que el método puede ser redefinido en clases derivadas.
* El destructor virtual asegura que al eliminar un objeto derivado a través de un puntero base se invoquen correctamente los destructores.

---

### Clases derivadas que sobrescriben métodos virtuales

```cpp
class Perro : public Animal {
public:
    void hacerSonido() const override {
        std::cout << "El perro ladra: ¡Guau!\n";
    }
};

class Gato : public Animal {
public:
    void hacerSonido() const override {
        std::cout << "El gato maúlla: ¡Miau!\n";
    }
};
```

---

## Uso polimórfico con punteros o referencias a clase base

```cpp
#include <iostream>
#include <vector>
#include <memory>

int main() {
    std::vector<std::unique_ptr<Animal>> animales;
    animales.push_back(std::make_unique<Perro>());
    animales.push_back(std::make_unique<Gato>());

    for (const auto& animal : animales) {
        animal->hacerSonido();  // Se invoca la versión correcta según el tipo real
    }

    return 0;
}
```

### Salida

```
El perro ladra: ¡Guau!
El gato maúlla: ¡Miau!
```

---

## Resumen clave

* El polimorfismo dinámico se consigue con métodos declarados `virtual` en la clase base.
* Permite usar punteros o referencias a la clase base para manipular objetos derivados.
* Es fundamental para diseñar interfaces y extender el comportamiento sin cambiar código cliente.
* Siempre declarar destructores virtuales en clases base destinadas a ser heredadas para evitar fugas o comportamientos indefinidos.

---

¿Quieres que sigamos con el siguiente punto: **Conversiones implícitas y punteros base**?
