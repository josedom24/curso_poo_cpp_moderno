Claro, aquí tienes el material didáctico para el apartado:

---

# El papel del `virtual` y el uso correcto de `override`

## Introducción

En C++, el polimorfismo dinámico se basa en el uso de funciones **virtuales**. La palabra clave `virtual` indica que un método puede ser redefinido en clases derivadas y que la llamada a ese método debe resolverse en tiempo de ejecución según el tipo real del objeto.

El uso correcto de `virtual` y `override` mejora la claridad del código, evita errores y facilita el mantenimiento.

---

## La palabra clave `virtual`

* Se declara en la clase base para marcar métodos que pueden ser redefinidos en clases derivadas.
* Cuando un método es `virtual`, las llamadas a ese método a través de punteros o referencias a la clase base ejecutan la versión correspondiente al tipo real del objeto (polimorfismo dinámico).
* Los destructores deben ser declarados `virtual` para asegurar que al destruir un objeto a través de un puntero base se invoquen todos los destructores correctamente.

```cpp
class Base {
public:
    virtual void funcion() {
        std::cout << "Función base\n";
    }
    virtual ~Base() = default; // Destructor virtual
};
```

---

## La palabra clave `override`

* Se usa en la declaración de un método en una clase derivada para indicar que está **sobrescribiendo** un método virtual de la clase base.
* Ayuda al compilador a verificar que el método realmente sobrescribe uno de la clase base, detectando errores si el nombre o la firma no coinciden.
* Mejora la legibilidad y el mantenimiento del código.

```cpp
class Derivada : public Base {
public:
    void funcion() override {  // Correcto uso de override
        std::cout << "Función derivada\n";
    }
};
```

---

## Ejemplo completo

```cpp
#include <iostream>

class Animal {
public:
    virtual void hacerSonido() const {
        std::cout << "Sonido genérico de animal\n";
    }
    virtual ~Animal() = default;
};

class Perro : public Animal {
public:
    void hacerSonido() const override {  // Indica que sobreescribe el método virtual
        std::cout << "Guau\n";
    }
};

int main() {
    Animal* animal = new Perro();
    animal->hacerSonido();  // Llama a Perro::hacerSonido por polimorfismo
    delete animal;
}
```

---

## Beneficios de usar `override`

* Detecta errores de firma (nombre, parámetros, const, etc.).
* Documenta la intención del programador.
* Evita errores sutiles donde un método no sobrescribe como se espera (por ejemplo, debido a un error tipográfico).

---

## Buenas prácticas

* Siempre declare los métodos que deben ser redefinidos en la clase base con `virtual`.
* Use `override` en todas las implementaciones en clases derivadas que sobrescriban métodos virtuales.
* Declare destructores virtuales en clases base que serán heredadas.
* Evite usar `virtual` en métodos finales o que no deban sobrescribirse.
* Combine con `final` para evitar que una clase o método sea derivado o sobrescrito (tema para otro apartado).

---

## Resumen

| Palabra clave | Uso                                                       | Beneficio clave                 |
| ------------- | --------------------------------------------------------- | ------------------------------- |
| `virtual`     | Declarar en clase base métodos polimórficos               | Permite polimorfismo dinámico   |
| `override`    | Declarar en clase derivada que sobrescribe método virtual | Evita errores y mejora claridad |

---

¿Quieres que siga con el último punto: **Finalización de métodos y clases con `final`**?
